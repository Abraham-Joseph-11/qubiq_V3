/**
 * Blockly Toolbox Configuration
 * Auto-generated by Block Creator Tool
 */

// Common categories shared by all boards
function getCommonCategories() {
    return [
        { kind: 'category', name: 'üîß Structure', colour: '#3949AB', contents: [{ kind: 'block', type: 'base_setup_loop' }] },
        {
            kind: 'category', name: '‚è±Ô∏è Timing', colour: '#424242', contents: [
                { kind: 'block', type: 'custom_wait' },
                { kind: 'block', type: 'custom_timer' },
                { kind: 'block', type: 'start_timekeeping' },
                { kind: 'block', type: 'get_duration' },
                { kind: 'block', type: 'state_duration' },
                { kind: 'block', type: 'math_number' }
            ]
        },
        {
            kind: 'category', name: 'üéõÔ∏è Arduino', colour: '#5E35B1', contents: [
                { kind: 'block', type: 'esp32_digital_write' },
                { kind: 'block', type: 'esp32_digital_state' },
                { kind: 'block', type: 'esp32_analog_write' },
                { kind: 'block', type: 'esp32_analog_read' },
                { kind: 'block', type: 'esp32_toggle_pin' },
                { kind: 'block', type: 'esp32_interrupt' },
                { kind: 'block', type: 'esp32_detach_interrupt' },
                { kind: 'block', type: 'esp32_restart' },
                { kind: 'block', type: 'esp32_deep_sleep' }
            ]
        },
        {
            kind: 'category', name: 'üîÑ Control', colour: '#1976D2', contents: [
                { kind: 'block', type: 'custom_controls_if' },
                { kind: 'block', type: 'custom_controls_ifelse' },
                { kind: 'block', type: 'custom_controls_if_ifnot' },
                { kind: 'block', type: 'custom_controls_repeat' },
                { kind: 'block', type: 'custom_controls_whileUntil' },
                { kind: 'block', type: 'custom_controls_for' },
                { kind: 'block', type: 'custom_controls_switch' },
                { kind: 'block', type: 'custom_flow_statements' },
                { kind: 'block', type: 'custom_logic_and' },
                { kind: 'block', type: 'custom_logic_not' },
                { kind: 'block', type: 'custom_logic_null' }
            ]
        },
        {
            kind: 'category', name: 'üî¢ Operators', colour: '#388E3C', contents: [
                { kind: 'block', type: 'math_number', fields: { 'NUM': 0 } },
                { kind: 'block', type: 'math_number', fields: { 'NUM': 90 } },
                { kind: 'block', type: 'math_number', fields: { 'NUM': 1 } }, // Placeholder for A1
                { kind: 'block', type: 'custom_text_value', fields: { 'TEXT': 'hello' } },
                { kind: 'block', type: 'math_arithmetic' },
                { kind: 'block', type: 'logic_compare', fields: { 'OP': 'EQ' } },
                { kind: 'block', type: 'logic_compare', fields: { 'OP': 'LT' } },
                { kind: 'block', type: 'custom_math_map' },
                { kind: 'block', type: 'math_modulo' },
                { kind: 'block', type: 'custom_math_random_int' },
                { kind: 'block', type: 'custom_math_constrain' },
                { kind: 'block', type: 'math_single', fields: { 'OP': 'ROOT' } },
                { kind: 'block', type: 'math_round' },
                { kind: 'block', type: 'math_trig', fields: { 'OP': 'SIN' } },
                { kind: 'block', type: 'math_constant', fields: { 'CONSTANT': 'PI' } },
                { kind: 'block', type: 'math_number_property', fields: { 'PROPERTY': 'EVEN' } },
                { kind: 'block', type: 'cast_to_byte' },
                { kind: 'block', type: 'cast_to_unsigned_int' },
                { kind: 'block', type: 'cast_to_int' },
                { kind: 'block', type: 'cast_to_float' }
            ]
        },
        { kind: 'category', name: '‚úñÔ∏è Variables', colour: '#D32F2F', custom: 'VARIABLE_DYNAMIC' },
        {
            kind: 'category',
            name: 'üîî Communicate',
            colour: '#1976D2',
            contents: [
                {
                    kind: 'category',
                    name: 'i USB Serial',
                    colour: '#0277BD',
                    contents: [
                        { kind: 'block', type: 'usb_serial_init' },
                        { kind: 'block', type: 'usb_serial_available' },
                        { kind: 'block', type: 'usb_serial_read_byte' },
                        { kind: 'block', type: 'usb_serial_read_string_until' },
                        { kind: 'block', type: 'usb_serial_read_number_until' },
                        { kind: 'block', type: 'usb_serial_print_format' },
                        { kind: 'block', type: 'usb_serial_print_same_line' },
                        { kind: 'block', type: 'usb_serial_print_new_line' },
                        { kind: 'block', type: 'usb_serial_write' },
                        { kind: 'block', type: 'custom_text_value', fields: { 'TEXT': 'message' } }
                    ]
                },
                {
                    kind: 'category',
                    name: 'Bluetooth',
                    colour: '#01579B',
                    contents: [
                        { kind: 'block', type: 'bluetooth_serial_init' },
                        { kind: 'block', type: 'bluetooth_serial_available' },
                        { kind: 'block', type: 'bluetooth_serial_read_byte' },
                        { kind: 'block', type: 'bluetooth_serial_read_string_until' },
                        { kind: 'block', type: 'bluetooth_serial_read_number_until' },
                        { kind: 'block', type: 'bluetooth_serial_print_format' },
                        { kind: 'block', type: 'bluetooth_serial_print_same_line' },
                        { kind: 'block', type: 'bluetooth_serial_print_new_line' },
                        { kind: 'block', type: 'bluetooth_serial_write' },
                        { kind: 'block', type: 'custom_text_value', fields: { 'TEXT': 'message' } }
                    ]
                }
            ]
        },
    ];
}

// EMMI BOT V2 specific categories
function getEmmiBotV2Categories() {
    return [
        {
            kind: 'category',
            name: 'üëÄ Eyes',
            colour: '#CB4335',
            contents: [
                { kind: 'block', type: 'emmi_eyes_digital' }
            ]
        },
        {
            kind: 'category',
            name: 'üí™ Wheels',
            colour: '#5D4037',
            contents: [
                { kind: 'block', type: 'emmi_wheels_init' },
                { kind: 'block', type: 'emmi_wheels_simple' }
            ]
        },
        {
            kind: 'category',
            name: 'üîä Buzzer',
            colour: '#E91E63',
            contents: [
                { kind: 'block', type: 'emmi_buzzer_music' },
                { kind: 'block', type: 'emmi_buzzer_music_custom' },
                { kind: 'block', type: 'emmi_buzzer_note' },
                { kind: 'block', type: 'emmi_buzzer_frequency' },
                { kind: 'block', type: 'emmi_buzzer_stop' }
            ]
        },
        {
            kind: 'category',
            name: 'üëâ Touch',
            colour: '#FFC107',
            contents: [
                { kind: 'block', type: 'emmi_touch_read' }
            ]
        },
        {
            kind: 'category',
            name: 'üî¶ Mic',
            colour: '#1A237E',
            contents: [
                { kind: 'block', type: 'emmi_mic_read' }
            ]
        },
        {
            kind: 'category',
            name: 'üí° Light',
            colour: '#FFA726',
            contents: [
                { kind: 'block', type: 'emmi_light_read' }
            ]
        },
    ];
}

// Explorer Kit specific categories
function getExplorerKitCategories() {
    return [
        { kind: 'category', name: 'üé∂ JOJU', colour: '#1ac125', contents: [{ kind: 'block', type: 'JOJU' }] },
    ];
}

// EMMI Bipedal specific categories
function getEmmiBipedalCategories() {
    return [
    ];
}

// Main toolbox configuration
function getToolbox(boardType = 'emmi-bot-v2') {
    let categories = [];

    // Add common categories
    categories = categories.concat(getCommonCategories());

    // Add board-specific categories
    switch (boardType) {
        case 'emmi-bot-v2':
            categories = categories.concat(getEmmiBotV2Categories());
            break;
        case 'explorer-kit':
            categories = categories.concat(getExplorerKitCategories());
            break;
        case 'emmi-bipedal':
            categories = categories.concat(getEmmiBipedalCategories());
            break;
    }

    return {
        kind: 'categoryToolbox',
        contents: categories
    };
}

// Create the ESP32Toolbox variable expected by app.js (use let for reassignment on board change)
let ESP32Toolbox = getToolbox('emmi-bot-v2');

// Alias for app.js compatibility when changing board types
function getToolboxForBoard(boardType) {
    return getToolbox(boardType);
}
